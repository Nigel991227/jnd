{"remainingRequest":"/Users/xieronghuo/jnd-demo/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/xieronghuo/jnd-demo/node_modules/view-design/src/components/select/dropdown.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/xieronghuo/jnd-demo/node_modules/view-design/src/components/select/dropdown.vue","mtime":1610356691000},{"path":"/Users/xieronghuo/jnd-demo/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/xieronghuo/jnd-demo/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/xieronghuo/jnd-demo/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/xieronghuo/jnd-demo/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KCmltcG9ydCBWdWUgZnJvbSAndnVlJzsKY29uc3QgaXNTZXJ2ZXIgPSBWdWUucHJvdG90eXBlLiRpc1NlcnZlcjsKaW1wb3J0IHsgZ2V0U3R5bGUgfSBmcm9tICcuLi8uLi91dGlscy9hc3Npc3QnOwpjb25zdCBQb3BwZXIgPSBpc1NlcnZlciA/IGZ1bmN0aW9uKCkge30gOiByZXF1aXJlKCdwb3BwZXIuanMvZGlzdC91bWQvcG9wcGVyLmpzJyk7ICAvLyBlc2xpbnQtZGlzYWJsZS1saW5lCgppbXBvcnQgeyB0cmFuc2ZlckluZGV4LCB0cmFuc2ZlckluY3JlYXNlIH0gZnJvbSAnLi4vLi4vdXRpbHMvdHJhbnNmZXItcXVldWUnOwoKZXhwb3J0IGRlZmF1bHQgewogICAgbmFtZTogJ0Ryb3AnLAogICAgcHJvcHM6IHsKICAgICAgICBwbGFjZW1lbnQ6IHsKICAgICAgICAgICAgdHlwZTogU3RyaW5nLAogICAgICAgICAgICBkZWZhdWx0OiAnYm90dG9tLXN0YXJ0JwogICAgICAgIH0sCiAgICAgICAgY2xhc3NOYW1lOiB7CiAgICAgICAgICAgIHR5cGU6IFN0cmluZwogICAgICAgIH0sCiAgICAgICAgdHJhbnNmZXI6IHsKICAgICAgICAgICAgdHlwZTogQm9vbGVhbgogICAgICAgIH0KICAgIH0sCiAgICBkYXRhICgpIHsKICAgICAgICByZXR1cm4gewogICAgICAgICAgICBwb3BwZXI6IG51bGwsCiAgICAgICAgICAgIHdpZHRoOiAnJywKICAgICAgICAgICAgcG9wcGVyU3RhdHVzOiBmYWxzZSwKICAgICAgICAgICAgdEluZGV4OiB0aGlzLmhhbmRsZUdldEluZGV4KCkKICAgICAgICB9OwogICAgfSwKICAgIGNvbXB1dGVkOiB7CiAgICAgICAgc3R5bGVzICgpIHsKICAgICAgICAgICAgbGV0IHN0eWxlID0ge307CiAgICAgICAgICAgIGlmICh0aGlzLndpZHRoKSBzdHlsZS5taW5XaWR0aCA9IGAke3RoaXMud2lkdGh9cHhgOwoKICAgICAgICAgICAgaWYgKHRoaXMudHJhbnNmZXIpIHN0eWxlWyd6LWluZGV4J10gPSAxMDYwICsgdGhpcy50SW5kZXg7CgogICAgICAgICAgICByZXR1cm4gc3R5bGU7CiAgICAgICAgfQogICAgfSwKICAgIG1ldGhvZHM6IHsKICAgICAgICB1cGRhdGUgKCkgewogICAgICAgICAgICBpZiAoaXNTZXJ2ZXIpIHJldHVybjsKICAgICAgICAgICAgaWYgKHRoaXMucG9wcGVyKSB7CiAgICAgICAgICAgICAgICB0aGlzLiRuZXh0VGljaygoKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5wb3BwZXIudXBkYXRlKCk7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5wb3BwZXJTdGF0dXMgPSB0cnVlOwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICB0aGlzLiRuZXh0VGljaygoKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5wb3BwZXIgPSBuZXcgUG9wcGVyKHRoaXMuJHBhcmVudC4kcmVmcy5yZWZlcmVuY2UsIHRoaXMuJGVsLCB7CiAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlbWVudDogdGhpcy5wbGFjZW1lbnQsCiAgICAgICAgICAgICAgICAgICAgICAgIG1vZGlmaWVyczogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29tcHV0ZVN0eWxlOnsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBncHVBY2NlbGVyYXRpb246IGZhbHNlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJldmVudE92ZXJmbG93IDp7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYm91bmRhcmllc0VsZW1lbnQ6ICd3aW5kb3cnCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIG9uQ3JlYXRlOigpPT57CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlc2V0VHJhbnNmb3JtT3JpZ2luKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiRuZXh0VGljayh0aGlzLnBvcHBlci51cGRhdGUoKSk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIG9uVXBkYXRlOigpPT57CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlc2V0VHJhbnNmb3JtT3JpZ2luKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CiAgICAgICAgICAgIC8vIHNldCBhIGhlaWdodCBmb3IgcGFyZW50IGlzIE1vZGFsIGFuZCBTZWxlY3QncyB3aWR0aCBpcyAxMDAlCiAgICAgICAgICAgIGlmICh0aGlzLiRwYXJlbnQuJG9wdGlvbnMubmFtZSA9PT0gJ2lTZWxlY3QnKSB7CiAgICAgICAgICAgICAgICB0aGlzLndpZHRoID0gcGFyc2VJbnQoZ2V0U3R5bGUodGhpcy4kcGFyZW50LiRlbCwgJ3dpZHRoJykpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHRoaXMudEluZGV4ID0gdGhpcy5oYW5kbGVHZXRJbmRleCgpOwogICAgICAgIH0sCiAgICAgICAgZGVzdHJveSAoKSB7CiAgICAgICAgICAgIGlmICh0aGlzLnBvcHBlcikgewogICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMucG9wcGVyICYmICF0aGlzLnBvcHBlclN0YXR1cykgewogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBvcHBlci5kZXN0cm95KCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucG9wcGVyID0gbnVsbDsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgdGhpcy5wb3BwZXJTdGF0dXMgPSBmYWxzZTsKICAgICAgICAgICAgICAgIH0sIDMwMCk7CiAgICAgICAgICAgIH0KICAgICAgICB9LAogICAgICAgIHJlc2V0VHJhbnNmb3JtT3JpZ2luKCkgewogICAgICAgICAgICAvLyDkuI3liKTmlq3vvIxTZWxlY3Qg5Lya5oql6ZSZ77yM5LiN55+l6YGT5Li65LuA5LmICiAgICAgICAgICAgIGlmICghdGhpcy5wb3BwZXIpIHJldHVybjsKCiAgICAgICAgICAgIGxldCB4X3BsYWNlbWVudCA9IHRoaXMucG9wcGVyLnBvcHBlci5nZXRBdHRyaWJ1dGUoJ3gtcGxhY2VtZW50Jyk7CiAgICAgICAgICAgIGxldCBwbGFjZW1lbnRTdGFydCA9IHhfcGxhY2VtZW50LnNwbGl0KCctJylbMF07CiAgICAgICAgICAgIGxldCBwbGFjZW1lbnRFbmQgPSB4X3BsYWNlbWVudC5zcGxpdCgnLScpWzFdOwogICAgICAgICAgICBjb25zdCBsZWZ0T3JSaWdodCA9IHhfcGxhY2VtZW50ID09PSAnbGVmdCcgfHwgeF9wbGFjZW1lbnQgPT09ICdyaWdodCc7CiAgICAgICAgICAgIGlmKCFsZWZ0T3JSaWdodCl7CiAgICAgICAgICAgICAgICB0aGlzLnBvcHBlci5wb3BwZXIuc3R5bGUudHJhbnNmb3JtT3JpZ2luID0gcGxhY2VtZW50U3RhcnQ9PT0nYm90dG9tJyB8fCAoIHBsYWNlbWVudFN0YXJ0ICE9PSAndG9wJyAmJiBwbGFjZW1lbnRFbmQgPT09ICdzdGFydCcpID8gJ2NlbnRlciB0b3AnIDogJ2NlbnRlciBib3R0b20nOwogICAgICAgICAgICB9CiAgICAgICAgfSwKICAgICAgICBoYW5kbGVHZXRJbmRleCAoKSB7CiAgICAgICAgICAgIHRyYW5zZmVySW5jcmVhc2UoKTsKICAgICAgICAgICAgcmV0dXJuIHRyYW5zZmVySW5kZXg7CiAgICAgICAgfSwKICAgIH0sCiAgICBjcmVhdGVkICgpIHsKICAgICAgICB0aGlzLiRvbignb24tdXBkYXRlLXBvcHBlcicsIHRoaXMudXBkYXRlKTsKICAgICAgICB0aGlzLiRvbignb24tZGVzdHJveS1wb3BwZXInLCB0aGlzLmRlc3Ryb3kpOwogICAgfSwKICAgIGJlZm9yZURlc3Ryb3kgKCkgewogICAgICAgIHRoaXMuJG9mZignb24tdXBkYXRlLXBvcHBlcicsIHRoaXMudXBkYXRlKTsKICAgICAgICB0aGlzLiRvZmYoJ29uLWRlc3Ryb3ktcG9wcGVyJywgdGhpcy5kZXN0cm95KTsKICAgICAgICBpZiAodGhpcy5wb3BwZXIpIHsKICAgICAgICAgICAgdGhpcy5wb3BwZXIuZGVzdHJveSgpOwogICAgICAgICAgICB0aGlzLnBvcHBlciA9IG51bGw7CiAgICAgICAgfQogICAgfQp9Owo="},{"version":3,"sources":["dropdown.vue"],"names":[],"mappings":";;;;AAIA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"dropdown.vue","sourceRoot":"node_modules/view-design/src/components/select","sourcesContent":["<template>\n    <div class=\"ivu-select-dropdown\" :class=\"className\" :style=\"styles\"><slot></slot></div>\n</template>\n<script>\n    import Vue from 'vue';\n    const isServer = Vue.prototype.$isServer;\n    import { getStyle } from '../../utils/assist';\n    const Popper = isServer ? function() {} : require('popper.js/dist/umd/popper.js');  // eslint-disable-line\n\n    import { transferIndex, transferIncrease } from '../../utils/transfer-queue';\n\n    export default {\n        name: 'Drop',\n        props: {\n            placement: {\n                type: String,\n                default: 'bottom-start'\n            },\n            className: {\n                type: String\n            },\n            transfer: {\n                type: Boolean\n            }\n        },\n        data () {\n            return {\n                popper: null,\n                width: '',\n                popperStatus: false,\n                tIndex: this.handleGetIndex()\n            };\n        },\n        computed: {\n            styles () {\n                let style = {};\n                if (this.width) style.minWidth = `${this.width}px`;\n\n                if (this.transfer) style['z-index'] = 1060 + this.tIndex;\n\n                return style;\n            }\n        },\n        methods: {\n            update () {\n                if (isServer) return;\n                if (this.popper) {\n                    this.$nextTick(() => {\n                        this.popper.update();\n                        this.popperStatus = true;\n                    });\n                } else {\n                    this.$nextTick(() => {\n                        this.popper = new Popper(this.$parent.$refs.reference, this.$el, {\n                            placement: this.placement,\n                            modifiers: {\n                                computeStyle:{\n                                    gpuAcceleration: false\n                                },\n                                preventOverflow :{\n                                    boundariesElement: 'window'\n                                }\n                            },\n                            onCreate:()=>{\n                                this.resetTransformOrigin();\n                                this.$nextTick(this.popper.update());\n                            },\n                            onUpdate:()=>{\n                                this.resetTransformOrigin();\n                            }\n                        });\n                    });\n                }\n                // set a height for parent is Modal and Select's width is 100%\n                if (this.$parent.$options.name === 'iSelect') {\n                    this.width = parseInt(getStyle(this.$parent.$el, 'width'));\n                }\n                this.tIndex = this.handleGetIndex();\n            },\n            destroy () {\n                if (this.popper) {\n                    setTimeout(() => {\n                        if (this.popper && !this.popperStatus) {\n                            this.popper.destroy();\n                            this.popper = null;\n                        }\n                        this.popperStatus = false;\n                    }, 300);\n                }\n            },\n            resetTransformOrigin() {\n                // 不判断，Select 会报错，不知道为什么\n                if (!this.popper) return;\n\n                let x_placement = this.popper.popper.getAttribute('x-placement');\n                let placementStart = x_placement.split('-')[0];\n                let placementEnd = x_placement.split('-')[1];\n                const leftOrRight = x_placement === 'left' || x_placement === 'right';\n                if(!leftOrRight){\n                    this.popper.popper.style.transformOrigin = placementStart==='bottom' || ( placementStart !== 'top' && placementEnd === 'start') ? 'center top' : 'center bottom';\n                }\n            },\n            handleGetIndex () {\n                transferIncrease();\n                return transferIndex;\n            },\n        },\n        created () {\n            this.$on('on-update-popper', this.update);\n            this.$on('on-destroy-popper', this.destroy);\n        },\n        beforeDestroy () {\n            this.$off('on-update-popper', this.update);\n            this.$off('on-destroy-popper', this.destroy);\n            if (this.popper) {\n                this.popper.destroy();\n                this.popper = null;\n            }\n        }\n    };\n</script>\n"]}]}