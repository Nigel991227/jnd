{"remainingRequest":"/Users/xieronghuo/jnd-demo/node_modules/babel-loader/lib/index.js!/Users/xieronghuo/jnd-demo/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/xieronghuo/jnd-demo/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/xieronghuo/jnd-demo/node_modules/view-design/src/components/select/dropdown.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/xieronghuo/jnd-demo/node_modules/view-design/src/components/select/dropdown.vue","mtime":1610356691000},{"path":"/Users/xieronghuo/jnd-demo/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/xieronghuo/jnd-demo/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/xieronghuo/jnd-demo/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/xieronghuo/jnd-demo/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KaW1wb3J0IFZ1ZSBmcm9tICd2dWUnOwpjb25zdCBpc1NlcnZlciA9IFZ1ZS5wcm90b3R5cGUuJGlzU2VydmVyOwppbXBvcnQgeyBnZXRTdHlsZSB9IGZyb20gJy4uLy4uL3V0aWxzL2Fzc2lzdCc7CmNvbnN0IFBvcHBlciA9IGlzU2VydmVyID8gZnVuY3Rpb24gKCkge30gOiByZXF1aXJlKCdwb3BwZXIuanMvZGlzdC91bWQvcG9wcGVyLmpzJyk7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUKCmltcG9ydCB7IHRyYW5zZmVySW5kZXgsIHRyYW5zZmVySW5jcmVhc2UgfSBmcm9tICcuLi8uLi91dGlscy90cmFuc2Zlci1xdWV1ZSc7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnRHJvcCcsCiAgcHJvcHM6IHsKICAgIHBsYWNlbWVudDogewogICAgICB0eXBlOiBTdHJpbmcsCiAgICAgIGRlZmF1bHQ6ICdib3R0b20tc3RhcnQnCiAgICB9LAogICAgY2xhc3NOYW1lOiB7CiAgICAgIHR5cGU6IFN0cmluZwogICAgfSwKICAgIHRyYW5zZmVyOiB7CiAgICAgIHR5cGU6IEJvb2xlYW4KICAgIH0KICB9LAoKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgcG9wcGVyOiBudWxsLAogICAgICB3aWR0aDogJycsCiAgICAgIHBvcHBlclN0YXR1czogZmFsc2UsCiAgICAgIHRJbmRleDogdGhpcy5oYW5kbGVHZXRJbmRleCgpCiAgICB9OwogIH0sCgogIGNvbXB1dGVkOiB7CiAgICBzdHlsZXMoKSB7CiAgICAgIGxldCBzdHlsZSA9IHt9OwogICAgICBpZiAodGhpcy53aWR0aCkgc3R5bGUubWluV2lkdGggPSBgJHt0aGlzLndpZHRofXB4YDsKICAgICAgaWYgKHRoaXMudHJhbnNmZXIpIHN0eWxlWyd6LWluZGV4J10gPSAxMDYwICsgdGhpcy50SW5kZXg7CiAgICAgIHJldHVybiBzdHlsZTsKICAgIH0KCiAgfSwKICBtZXRob2RzOiB7CiAgICB1cGRhdGUoKSB7CiAgICAgIGlmIChpc1NlcnZlcikgcmV0dXJuOwoKICAgICAgaWYgKHRoaXMucG9wcGVyKSB7CiAgICAgICAgdGhpcy4kbmV4dFRpY2soKCkgPT4gewogICAgICAgICAgdGhpcy5wb3BwZXIudXBkYXRlKCk7CiAgICAgICAgICB0aGlzLnBvcHBlclN0YXR1cyA9IHRydWU7CiAgICAgICAgfSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy4kbmV4dFRpY2soKCkgPT4gewogICAgICAgICAgdGhpcy5wb3BwZXIgPSBuZXcgUG9wcGVyKHRoaXMuJHBhcmVudC4kcmVmcy5yZWZlcmVuY2UsIHRoaXMuJGVsLCB7CiAgICAgICAgICAgIHBsYWNlbWVudDogdGhpcy5wbGFjZW1lbnQsCiAgICAgICAgICAgIG1vZGlmaWVyczogewogICAgICAgICAgICAgIGNvbXB1dGVTdHlsZTogewogICAgICAgICAgICAgICAgZ3B1QWNjZWxlcmF0aW9uOiBmYWxzZQogICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgcHJldmVudE92ZXJmbG93OiB7CiAgICAgICAgICAgICAgICBib3VuZGFyaWVzRWxlbWVudDogJ3dpbmRvdycKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIG9uQ3JlYXRlOiAoKSA9PiB7CiAgICAgICAgICAgICAgdGhpcy5yZXNldFRyYW5zZm9ybU9yaWdpbigpOwogICAgICAgICAgICAgIHRoaXMuJG5leHRUaWNrKHRoaXMucG9wcGVyLnVwZGF0ZSgpKTsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgb25VcGRhdGU6ICgpID0+IHsKICAgICAgICAgICAgICB0aGlzLnJlc2V0VHJhbnNmb3JtT3JpZ2luKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICAgIH0pOwogICAgICB9IC8vIHNldCBhIGhlaWdodCBmb3IgcGFyZW50IGlzIE1vZGFsIGFuZCBTZWxlY3QncyB3aWR0aCBpcyAxMDAlCgoKICAgICAgaWYgKHRoaXMuJHBhcmVudC4kb3B0aW9ucy5uYW1lID09PSAnaVNlbGVjdCcpIHsKICAgICAgICB0aGlzLndpZHRoID0gcGFyc2VJbnQoZ2V0U3R5bGUodGhpcy4kcGFyZW50LiRlbCwgJ3dpZHRoJykpOwogICAgICB9CgogICAgICB0aGlzLnRJbmRleCA9IHRoaXMuaGFuZGxlR2V0SW5kZXgoKTsKICAgIH0sCgogICAgZGVzdHJveSgpIHsKICAgICAgaWYgKHRoaXMucG9wcGVyKSB7CiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgICBpZiAodGhpcy5wb3BwZXIgJiYgIXRoaXMucG9wcGVyU3RhdHVzKSB7CiAgICAgICAgICAgIHRoaXMucG9wcGVyLmRlc3Ryb3koKTsKICAgICAgICAgICAgdGhpcy5wb3BwZXIgPSBudWxsOwogICAgICAgICAgfQoKICAgICAgICAgIHRoaXMucG9wcGVyU3RhdHVzID0gZmFsc2U7CiAgICAgICAgfSwgMzAwKTsKICAgICAgfQogICAgfSwKCiAgICByZXNldFRyYW5zZm9ybU9yaWdpbigpIHsKICAgICAgLy8g5LiN5Yik5pat77yMU2VsZWN0IOS8muaKpemUme+8jOS4jeefpemBk+S4uuS7gOS5iAogICAgICBpZiAoIXRoaXMucG9wcGVyKSByZXR1cm47CiAgICAgIGxldCB4X3BsYWNlbWVudCA9IHRoaXMucG9wcGVyLnBvcHBlci5nZXRBdHRyaWJ1dGUoJ3gtcGxhY2VtZW50Jyk7CiAgICAgIGxldCBwbGFjZW1lbnRTdGFydCA9IHhfcGxhY2VtZW50LnNwbGl0KCctJylbMF07CiAgICAgIGxldCBwbGFjZW1lbnRFbmQgPSB4X3BsYWNlbWVudC5zcGxpdCgnLScpWzFdOwogICAgICBjb25zdCBsZWZ0T3JSaWdodCA9IHhfcGxhY2VtZW50ID09PSAnbGVmdCcgfHwgeF9wbGFjZW1lbnQgPT09ICdyaWdodCc7CgogICAgICBpZiAoIWxlZnRPclJpZ2h0KSB7CiAgICAgICAgdGhpcy5wb3BwZXIucG9wcGVyLnN0eWxlLnRyYW5zZm9ybU9yaWdpbiA9IHBsYWNlbWVudFN0YXJ0ID09PSAnYm90dG9tJyB8fCBwbGFjZW1lbnRTdGFydCAhPT0gJ3RvcCcgJiYgcGxhY2VtZW50RW5kID09PSAnc3RhcnQnID8gJ2NlbnRlciB0b3AnIDogJ2NlbnRlciBib3R0b20nOwogICAgICB9CiAgICB9LAoKICAgIGhhbmRsZUdldEluZGV4KCkgewogICAgICB0cmFuc2ZlckluY3JlYXNlKCk7CiAgICAgIHJldHVybiB0cmFuc2ZlckluZGV4OwogICAgfQoKICB9LAoKICBjcmVhdGVkKCkgewogICAgdGhpcy4kb24oJ29uLXVwZGF0ZS1wb3BwZXInLCB0aGlzLnVwZGF0ZSk7CiAgICB0aGlzLiRvbignb24tZGVzdHJveS1wb3BwZXInLCB0aGlzLmRlc3Ryb3kpOwogIH0sCgogIGJlZm9yZURlc3Ryb3koKSB7CiAgICB0aGlzLiRvZmYoJ29uLXVwZGF0ZS1wb3BwZXInLCB0aGlzLnVwZGF0ZSk7CiAgICB0aGlzLiRvZmYoJ29uLWRlc3Ryb3ktcG9wcGVyJywgdGhpcy5kZXN0cm95KTsKCiAgICBpZiAodGhpcy5wb3BwZXIpIHsKICAgICAgdGhpcy5wb3BwZXIuZGVzdHJveSgpOwogICAgICB0aGlzLnBvcHBlciA9IG51bGw7CiAgICB9CiAgfQoKfTs="},{"version":3,"sources":["dropdown.vue"],"names":[],"mappings":";;;AAIA,OAAA,GAAA,MAAA,KAAA;AACA,MAAA,QAAA,GAAA,GAAA,CAAA,SAAA,CAAA,SAAA;AACA,SAAA,QAAA,QAAA,oBAAA;AACA,MAAA,MAAA,GAAA,QAAA,GAAA,YAAA,CAAA,CAAA,GAAA,OAAA,CAAA,8BAAA,CAAA,C,CAAA;;AAEA,SAAA,aAAA,EAAA,gBAAA,QAAA,4BAAA;AAEA,eAAA;AACA,EAAA,IAAA,EAAA,MADA;AAEA,EAAA,KAAA,EAAA;AACA,IAAA,SAAA,EAAA;AACA,MAAA,IAAA,EAAA,MADA;AAEA,MAAA,OAAA,EAAA;AAFA,KADA;AAKA,IAAA,SAAA,EAAA;AACA,MAAA,IAAA,EAAA;AADA,KALA;AAQA,IAAA,QAAA,EAAA;AACA,MAAA,IAAA,EAAA;AADA;AARA,GAFA;;AAcA,EAAA,IAAA,GAAA;AACA,WAAA;AACA,MAAA,MAAA,EAAA,IADA;AAEA,MAAA,KAAA,EAAA,EAFA;AAGA,MAAA,YAAA,EAAA,KAHA;AAIA,MAAA,MAAA,EAAA,KAAA,cAAA;AAJA,KAAA;AAMA,GArBA;;AAsBA,EAAA,QAAA,EAAA;AACA,IAAA,MAAA,GAAA;AACA,UAAA,KAAA,GAAA,EAAA;AACA,UAAA,KAAA,KAAA,EAAA,KAAA,CAAA,QAAA,GAAA,GAAA,KAAA,KAAA,IAAA;AAEA,UAAA,KAAA,QAAA,EAAA,KAAA,CAAA,SAAA,CAAA,GAAA,OAAA,KAAA,MAAA;AAEA,aAAA,KAAA;AACA;;AARA,GAtBA;AAgCA,EAAA,OAAA,EAAA;AACA,IAAA,MAAA,GAAA;AACA,UAAA,QAAA,EAAA;;AACA,UAAA,KAAA,MAAA,EAAA;AACA,aAAA,SAAA,CAAA,MAAA;AACA,eAAA,MAAA,CAAA,MAAA;AACA,eAAA,YAAA,GAAA,IAAA;AACA,SAHA;AAIA,OALA,MAKA;AACA,aAAA,SAAA,CAAA,MAAA;AACA,eAAA,MAAA,GAAA,IAAA,MAAA,CAAA,KAAA,OAAA,CAAA,KAAA,CAAA,SAAA,EAAA,KAAA,GAAA,EAAA;AACA,YAAA,SAAA,EAAA,KAAA,SADA;AAEA,YAAA,SAAA,EAAA;AACA,cAAA,YAAA,EAAA;AACA,gBAAA,eAAA,EAAA;AADA,eADA;AAIA,cAAA,eAAA,EAAA;AACA,gBAAA,iBAAA,EAAA;AADA;AAJA,aAFA;AAUA,YAAA,QAAA,EAAA,MAAA;AACA,mBAAA,oBAAA;AACA,mBAAA,SAAA,CAAA,KAAA,MAAA,CAAA,MAAA,EAAA;AACA,aAbA;AAcA,YAAA,QAAA,EAAA,MAAA;AACA,mBAAA,oBAAA;AACA;AAhBA,WAAA,CAAA;AAkBA,SAnBA;AAoBA,OA5BA,CA6BA;;;AACA,UAAA,KAAA,OAAA,CAAA,QAAA,CAAA,IAAA,KAAA,SAAA,EAAA;AACA,aAAA,KAAA,GAAA,QAAA,CAAA,QAAA,CAAA,KAAA,OAAA,CAAA,GAAA,EAAA,OAAA,CAAA,CAAA;AACA;;AACA,WAAA,MAAA,GAAA,KAAA,cAAA,EAAA;AACA,KAnCA;;AAoCA,IAAA,OAAA,GAAA;AACA,UAAA,KAAA,MAAA,EAAA;AACA,QAAA,UAAA,CAAA,MAAA;AACA,cAAA,KAAA,MAAA,IAAA,CAAA,KAAA,YAAA,EAAA;AACA,iBAAA,MAAA,CAAA,OAAA;AACA,iBAAA,MAAA,GAAA,IAAA;AACA;;AACA,eAAA,YAAA,GAAA,KAAA;AACA,SANA,EAMA,GANA,CAAA;AAOA;AACA,KA9CA;;AA+CA,IAAA,oBAAA,GAAA;AACA;AACA,UAAA,CAAA,KAAA,MAAA,EAAA;AAEA,UAAA,WAAA,GAAA,KAAA,MAAA,CAAA,MAAA,CAAA,YAAA,CAAA,aAAA,CAAA;AACA,UAAA,cAAA,GAAA,WAAA,CAAA,KAAA,CAAA,GAAA,EAAA,CAAA,CAAA;AACA,UAAA,YAAA,GAAA,WAAA,CAAA,KAAA,CAAA,GAAA,EAAA,CAAA,CAAA;AACA,YAAA,WAAA,GAAA,WAAA,KAAA,MAAA,IAAA,WAAA,KAAA,OAAA;;AACA,UAAA,CAAA,WAAA,EAAA;AACA,aAAA,MAAA,CAAA,MAAA,CAAA,KAAA,CAAA,eAAA,GAAA,cAAA,KAAA,QAAA,IAAA,cAAA,KAAA,KAAA,IAAA,YAAA,KAAA,OAAA,GAAA,YAAA,GAAA,eAAA;AACA;AACA,KA1DA;;AA2DA,IAAA,cAAA,GAAA;AACA,MAAA,gBAAA;AACA,aAAA,aAAA;AACA;;AA9DA,GAhCA;;AAgGA,EAAA,OAAA,GAAA;AACA,SAAA,GAAA,CAAA,kBAAA,EAAA,KAAA,MAAA;AACA,SAAA,GAAA,CAAA,mBAAA,EAAA,KAAA,OAAA;AACA,GAnGA;;AAoGA,EAAA,aAAA,GAAA;AACA,SAAA,IAAA,CAAA,kBAAA,EAAA,KAAA,MAAA;AACA,SAAA,IAAA,CAAA,mBAAA,EAAA,KAAA,OAAA;;AACA,QAAA,KAAA,MAAA,EAAA;AACA,WAAA,MAAA,CAAA,OAAA;AACA,WAAA,MAAA,GAAA,IAAA;AACA;AACA;;AA3GA,CAAA","sourcesContent":["<template>\n    <div class=\"ivu-select-dropdown\" :class=\"className\" :style=\"styles\"><slot></slot></div>\n</template>\n<script>\n    import Vue from 'vue';\n    const isServer = Vue.prototype.$isServer;\n    import { getStyle } from '../../utils/assist';\n    const Popper = isServer ? function() {} : require('popper.js/dist/umd/popper.js');  // eslint-disable-line\n\n    import { transferIndex, transferIncrease } from '../../utils/transfer-queue';\n\n    export default {\n        name: 'Drop',\n        props: {\n            placement: {\n                type: String,\n                default: 'bottom-start'\n            },\n            className: {\n                type: String\n            },\n            transfer: {\n                type: Boolean\n            }\n        },\n        data () {\n            return {\n                popper: null,\n                width: '',\n                popperStatus: false,\n                tIndex: this.handleGetIndex()\n            };\n        },\n        computed: {\n            styles () {\n                let style = {};\n                if (this.width) style.minWidth = `${this.width}px`;\n\n                if (this.transfer) style['z-index'] = 1060 + this.tIndex;\n\n                return style;\n            }\n        },\n        methods: {\n            update () {\n                if (isServer) return;\n                if (this.popper) {\n                    this.$nextTick(() => {\n                        this.popper.update();\n                        this.popperStatus = true;\n                    });\n                } else {\n                    this.$nextTick(() => {\n                        this.popper = new Popper(this.$parent.$refs.reference, this.$el, {\n                            placement: this.placement,\n                            modifiers: {\n                                computeStyle:{\n                                    gpuAcceleration: false\n                                },\n                                preventOverflow :{\n                                    boundariesElement: 'window'\n                                }\n                            },\n                            onCreate:()=>{\n                                this.resetTransformOrigin();\n                                this.$nextTick(this.popper.update());\n                            },\n                            onUpdate:()=>{\n                                this.resetTransformOrigin();\n                            }\n                        });\n                    });\n                }\n                // set a height for parent is Modal and Select's width is 100%\n                if (this.$parent.$options.name === 'iSelect') {\n                    this.width = parseInt(getStyle(this.$parent.$el, 'width'));\n                }\n                this.tIndex = this.handleGetIndex();\n            },\n            destroy () {\n                if (this.popper) {\n                    setTimeout(() => {\n                        if (this.popper && !this.popperStatus) {\n                            this.popper.destroy();\n                            this.popper = null;\n                        }\n                        this.popperStatus = false;\n                    }, 300);\n                }\n            },\n            resetTransformOrigin() {\n                // 不判断，Select 会报错，不知道为什么\n                if (!this.popper) return;\n\n                let x_placement = this.popper.popper.getAttribute('x-placement');\n                let placementStart = x_placement.split('-')[0];\n                let placementEnd = x_placement.split('-')[1];\n                const leftOrRight = x_placement === 'left' || x_placement === 'right';\n                if(!leftOrRight){\n                    this.popper.popper.style.transformOrigin = placementStart==='bottom' || ( placementStart !== 'top' && placementEnd === 'start') ? 'center top' : 'center bottom';\n                }\n            },\n            handleGetIndex () {\n                transferIncrease();\n                return transferIndex;\n            },\n        },\n        created () {\n            this.$on('on-update-popper', this.update);\n            this.$on('on-destroy-popper', this.destroy);\n        },\n        beforeDestroy () {\n            this.$off('on-update-popper', this.update);\n            this.$off('on-destroy-popper', this.destroy);\n            if (this.popper) {\n                this.popper.destroy();\n                this.popper = null;\n            }\n        }\n    };\n</script>\n"],"sourceRoot":"node_modules/view-design/src/components/select"}]}